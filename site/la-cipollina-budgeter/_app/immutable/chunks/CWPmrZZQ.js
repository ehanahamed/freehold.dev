function J(g,y,E,o,s){var O,C,N,W,L,P,R,S,b,j,q,v,z,A,G;let r=g,p=y,u=E;r+=o.foodBudgetIncrease??0,p+=o.kitchenBudgetIncrease??0,u+=o.floorBudgetIncrease??0;const f=(()=>{const[e,l,t]=o.date.split("-");return new Date(e,l-1,t)})(),n=["sun","mon","tue","wed","thu","fri","sat"][f.getDay()];let c=0,d=[],a=[],h=[],i=[];(O=o==null?void 0:o.foodCosts)==null||O.forEach(e=>{c+=e.cost}),(C=o==null?void 0:o.hoursWorked)==null||C.forEach(e=>{e.employee.specialPay&&(e.employee.type=="FLOOR"?i.push(e):e.employee.type=="KITCHEN"&&a.push(e)),e.employee.type=="FLOOR"?h.push(e):e.employee.type=="KITCHEN"&&d.push(e)}),(N=o==null?void 0:o.workedToday)==null||N.forEach(e=>{if(e.employee.type=="FLOOR"){let l=!1;for(let t=0;t<i.length;t++)i[t].employee.id==e.employee.id&&(l=!0,i[t].workedToday=e.workedToday);l||i.push(e)}else if(e.employee.type=="KITCHEN"){let l=!1;for(let t=0;t<a.length;t++)a[t].employee.id==e.employee.id&&(l=!0,a[t].workedToday=e.workedToday);l||a.push(e)}});let m=0,B=0,k=0,F=0;d==null||d.forEach(e=>{m+=e.hours*e.employee.wage}),h==null||h.forEach(e=>{k+=e.hours*e.employee.wage});for(let e=0;e<a.length;e++){const l=a[e];let t=0;l.workedToday&&((P=(L=(W=l==null?void 0:l.employee)==null?void 0:W.specialPay)==null?void 0:L[n])==null?void 0:P.perDay)!=null&&(t+=l.employee.specialPay[n].perDay),l.hours!=null&&((b=(S=(R=l==null?void 0:l.employee)==null?void 0:R.specialPay)==null?void 0:S[n])==null?void 0:b.perHour)!=null&&(t+=l.hours*l.employee.specialPay[n].perHour),a[e].earned=t,B+=t}for(let e=0;e<i.length;e++){const l=i[e];let t=0;l.workedToday&&((v=(q=(j=l==null?void 0:l.employee)==null?void 0:j.specialPay)==null?void 0:q[n])==null?void 0:v.perDay)!=null&&(t+=l.employee.specialPay[n].perDay),l.hours!=null&&((G=(A=(z=l==null?void 0:l.employee)==null?void 0:z.specialPay)==null?void 0:A[n])==null?void 0:G.perHour)!=null&&(t+=l.hours*l.employee.specialPay[n].perHour),i[e].earned=t,F+=t}let H=[],D=[],I=0,T=0;s==null||s.forEach(e=>{e.type=="KITCHEN"?(H.push(e),I+=e.weeklyPay):e.type=="FLOOR"&&(D.push(e),T+=e.weeklyPay)});let K=m+B+I,x=k+F+T;return r-=c,p-=K,u-=x,{foodBudgetStart:g,kitchenBudgetStart:y,floorBudgetStart:E,foodBudgetIncrease:o.foodBudgetIncrease??0,kitchenBudgetIncrease:o.kitchenBudgetIncrease??0,floorBudgetIncrease:o.floorBudgetIncrease??0,foodExpenses:c,kitchenExpenses:K,floorExpenses:x,foodBudgetFinal:r,kitchenBudgetFinal:p,floorBudgetFinal:u,kitchenHourly:d,kitchenSpecialPay:a,floorHourly:h,floorSpecialPay:i,totalKitchenHourlyEarned:m,totalKitchenSpecialEarned:B,totalFloorHourlyEarned:k,totalFloorSpecialEarned:F,totalKitchenWeeklyEarned:I,totalFloorWeeklyEarned:T,kitchenWeeklyEmployees:H,floorWeeklyEmployees:D,date:f}}function M(g,y,E,o,s){let r=g,p=y,u=E,f=1;return o.forEach(n=>{let c=J(r,p,u,n,f==1&&(s==null?void 0:s.length)>=1?s:null);r=c.foodBudgetFinal,p=c.kitchenBudgetFinal,u=c.floorBudgetFinal,f++}),{foodBudget:r,kitchenBudget:p,floorBudget:u}}export{J as c,M as r};
