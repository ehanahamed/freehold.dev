import{P as I}from"../chunks/juNQPxT-.js";import{d as ra,e as B,a as b,t as P,g as ia}from"../chunks/DehP6Mmi.js";import{p as oa,a9 as E,a7 as T,o as u,a6 as x,aa as rt,t as k,a as na,a3 as o,a2 as e,a4 as a,a5 as it}from"../chunks/abUTAAem.js";import{s as m}from"../chunks/Dgg-Cmmx.js";import{i as w}from"../chunks/C1hVJviJ.js";import{e as kt,i as St}from"../chunks/BddKktbU.js";import{s as Dt,r as sa,b as da}from"../chunks/DnMzuOnq.js";import{t as la,f as ua}from"../chunks/BRpqZUsj.js";import{b as ma}from"../chunks/Dhxvh-rD.js";import{b as $}from"../chunks/9csiaD8_.js";import{B as ca}from"../chunks/V-Q0yVa9.js";import{C as wt}from"../chunks/DuO0dWcV.js";import{p as va,t as ga,C as _a,L as ha}from"../chunks/C7ppDnFM.js";import{c as fa}from"../chunks/CWPmrZZQ.js";import{d as J}from"../chunks/BepKD6Lw.js";import{d as ba}from"../chunks/zuijxeg2.js";async function pa({fetch:M,params:d,url:i}){if(window.localStorage){let S=localStorage.getItem("budgeter:auth");try{const U=await(await M(`${I}/weeks/${d.date}`,{method:"GET",headers:{Authorization:"Bearer "+S,"Eh-Share-Link-Token":i.searchParams.get("s")}})).json(),p=await(await M(`${I}/weeks/${d.date}/days`,{method:"GET",headers:{Authorization:"Bearer "+S,"Eh-Share-Link-Token":i.searchParams.get("s")}})).json();return{authed:!0,PUBLIC_API_URL:I,date:d.date,week:U,days:p,usingShareLink:S==null&&i.searchParams.has("s")}}catch(U){return console.error("Error while getting data: ",U),{authed:!1,error:!0,PUBLIC_API_URL:I,date:d.date,usingShareLink:S==null&&i.searchParams.has("s")}}}}const za=Object.freeze(Object.defineProperty({__proto__:null,load:pa},Symbol.toStringTag,{value:"Module"}));var ya=B('<div class="flex"><a class="button faint"><!> Back</a></div>'),xa=B("<tr><td><b> </b></td><td> </td><td> </td><td> </td></tr> <tr><td>Increases</td><td> </td><td> </td><td> </td></tr> <tr><td>Expenses</td><td> </td><td> </td><td> </td></tr>",1),ka=B('<details><summary style="cursor: pointer;">Copy, Save, or Send this Report</summary> <div><p>You can copy &amp; paste the table</p> <button class="alt"><!> Copy</button> <p style="margin-top: 2rem;">Or you can send a link to this page;<br/> anyone with this special link can view this report<br/> without having to log in<br/></p> <div class="flex compact-gap"><input type="text" disabled/> <button class="alt"><!> Copy Link</button></div></div></details>'),Sa=(M,d,i,S)=>{x(d,!0),x(i,S,!0)},Da=B('<button class="button button-box"> <span class="fg0"> </span></button>'),wa=B('<a class="button button-box"> <span class="fg0"> </span></a>'),Fa=(M,d,i)=>{x(d,!1),x(i,-1)},La=B('<div class="modal"><div class="content"><h4> </h4> <p>No data for this day</p> <div class="flex"><button>Okay</button></div></div></div>'),Ta=B('<div class="grid page" style="margin-top: 4rem; margin-bottom: 10rem;"><div class="content"><!> <h3 style="margin-bottom: 0px;">Week Report</h3> <p style="margin-top: 0.4rem;"><!></p> <div style="margin-top: 2rem;"><div style="display: inline-block; margin-bottom: 2rem;"><div style="border: 0.2rem solid var(--border); border-radius: 0.8rem; min-width: 18rem;"><table style="border: none;"><thead><tr><th></th><th>Food Budget</th><th>Kitchen Budget</th><th>Floor Budget</th></tr></thead><tbody><!><tr><td><b>Week Final</b></td><td> </td><td> </td><td> </td></tr></tbody></table></div> <!></div></div> <p><!></p> <div class="flex" style="max-width: 16rem; flex-direction: column; flex-wrap: nowrap;"></div></div></div> <!>',1);function Ga(M,d){oa(d,!0);const i=(()=>{const[r,t,n]=d.data.week.startDate.split("-"),l=new Date(r,t-1,n);if(isNaN(l))window.location=`${$}/reports/${d.data.week.startDate}/err/invalid-date`;else return l})(),S=(()=>{const[r,t,n]=d.data.week.endDate.split("-");return new Date(r,t-1,n)})(),U=J(i),p={mon:i,tue:new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),wed:new Date(i.getFullYear(),i.getMonth(),i.getDate()+2),thu:new Date(i.getFullYear(),i.getMonth(),i.getDate()+3),fri:new Date(i.getFullYear(),i.getMonth(),i.getDate()+4),sat:new Date(i.getFullYear(),i.getMonth(),i.getDate()+5),sun:S},Ft=["sun","mon","tue","wed","thu","fri","sat"],ot=["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()],Lt=ba(i);let g=E({}),C=T(E(d.data.week.startFoodBudget)),W=T(E(d.data.week.startKitchenBudget)),O=T(E(d.data.week.startFloorBudget)),nt=1;d.data.days.forEach(r=>{const[t,n,l]=r.date.split("-"),y=new Date(t,n-1,l),v=fa(u(C),u(W),u(O),r,nt==1?d.data.week.weeklyPay:null);g[Ft[y.getDay()]]=v,x(C,v.foodBudgetFinal,!0),x(W,v.kitchenBudgetFinal,!0),x(O,v.floorBudgetFinal,!0),nt++});const st=`${window.location.origin+$}/reports/${U}?s=${d.data.week.shareLinkToken}`;let Y,R=T(!1),dt,j=T(!1),lt,z=T(!1),A=T(-1);var ut=Ta(),G=rt(ut),mt=e(G),ct=e(mt);{var Tt=r=>{var t=ya(),n=e(t),l=e(n);ca(l,{}),it(),a(n),a(t),k(()=>Dt(n,"href",`${$??""}/reports`)),b(r,t)};w(ct,r=>{d.data.usingShareLink||r(Tt)})}var H=o(ct,4),Bt=e(H);{var Mt=r=>{var t=P();k((n,l)=>m(t,`Week ${Lt??""} (${ot??""} ${n??""}, ${l??""})`),[()=>i.getDate(),()=>i.getFullYear()]),b(r,t)},$t=r=>{var t=P();k((n,l)=>m(t,`Week of ${ot??""} ${n??""}, ${l??""}`),[()=>i.getDate(),()=>i.getFullYear()]),b(r,t)};w(Bt,r=>{(localStorage==null?void 0:localStorage.getItem("budgeter:showWeekNums"))=="true"?r(Mt):r($t,!1)})}a(H);var V=o(H,2),vt=e(V),q=e(vt),Q=e(q),gt=o(e(Q)),_t=e(gt);kt(_t,17,()=>Object.keys(g),St,(r,t)=>{var n=xa(),l=rt(n),y=e(l),v=e(y),f=e(v,!0);a(v),a(y);var c=o(y),_=e(c);a(c);var h=o(c),F=e(h);a(h);var D=o(h),L=e(D);a(D),a(l);var s=o(l,2),N=o(e(s)),Ot=e(N);a(N);var tt=o(N),Rt=e(tt);a(tt);var pt=o(tt),jt=e(pt);a(pt),a(s);var yt=o(s,2),at=o(e(yt)),zt=e(at);a(at);var et=o(at),Gt=e(et);a(et);var xt=o(et),Ht=e(xt);a(xt),a(yt),k((Vt,qt,Qt,Xt,Zt,Kt,ta,aa,ea)=>{m(f,{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[u(t)]),m(_,`$${Vt??""}`),m(F,`$${qt??""}`),m(L,`$${Qt??""}`),m(Ot,`+$${Xt??""}`),m(Rt,`+$${Zt??""}`),m(jt,`+$${Kt??""}`),m(zt,`-$${ta??""}`),m(Gt,`-$${aa??""}`),m(Ht,`-$${ea??""}`)},[()=>g[u(t)].foodBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].foodBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].foodExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),b(r,n)});var ht=o(_t),X=o(e(ht)),Ut=e(X);a(X);var Z=o(X),At=e(Z);a(Z);var ft=o(Z),Nt=e(ft);a(ft),a(ht),a(gt),a(Q),ma(Q,r=>Y=r,()=>Y),a(q);var Yt=o(q,2);{var It=r=>{var t=ka(),n=o(e(t),2),l=o(e(n),2);l.__click=async()=>{try{clearTimeout(dt);let s=Y.cloneNode(!0);s.removeAttribute("style");const N=va(ga(Y),2);await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([s.outerHTML],{type:"text/html"}),"text/plain":new Blob([N],{type:"text/plain"})})]),x(R,!0),dt=setTimeout(()=>x(R,!1),1e3)}catch(s){console.error(s),alert("idk why it didn't work ðŸ’€")}};var y=e(l);{var v=s=>{wt(s,{})},f=s=>{_a(s,{})};w(y,s=>{u(R)?s(v):s(f,!1)})}it(),a(l);var c=o(l,4),_=e(c);sa(_);var h=o(_,2);h.__click=async()=>{try{clearTimeout(lt),await navigator.clipboard.writeText(st),x(j,!0),lt=setTimeout(()=>x(j,!1),1e3)}catch(s){console.error(s),alert("idk why it didn't work ðŸ’€")}};var F=e(h);{var D=s=>{wt(s,{})},L=s=>{ha(s,{})};w(F,s=>{u(j)?s(D):s(L,!1)})}it(),a(h),a(c),a(n),a(t),k(()=>da(_,st)),b(r,t)};w(Yt,r=>{d.data.usingShareLink||r(It)})}a(vt),a(V);var K=o(V,2),Pt=e(K);{var Et=r=>{var t=P("Day Reports & Details:");b(r,t)},Jt=r=>{var t=P("View/Edit Days:");b(r,t)};w(Pt,r=>{d.data.usingShareLink?r(Et):r(Jt,!1)})}a(K);var bt=o(K,2);kt(bt,20,()=>["mon","tue","wed","thu","fri","sat","sun"],St,(r,t)=>{var n=ia(),l=rt(n);{var y=f=>{var c=Da();c.__click=[Sa,z,A,t];var _=e(c),h=o(_),F=e(h);a(h),a(c),k((D,L)=>{m(_,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),m(F,`${D??""} ${L??""}`)},[()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[t].getMonth()],()=>p[t].getDate()]),b(f,c)},v=f=>{var c=wa(),_=e(c),h=o(_),F=e(h);a(h),a(c),k((D,L,s)=>{Dt(c,"href",D),m(_,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),m(F,`${L??""} ${s??""}`)},[()=>d.data.usingShareLink?`${$}/days/${J(p[t])}?s=${d.data.week.shareLinkToken}`:g[t]?`${$}/days/${J(p[t])}`:`${$}/record-day?d=${J(p[t])}`,()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[t].getMonth()],()=>p[t].getDate()]),b(f,c)};w(l,f=>{d.data.usingShareLink&&g[t]==null?f(y):f(v,!1)})}b(r,n)}),a(bt),a(mt),a(G);var Ct=o(G,2);{var Wt=r=>{var t=La(),n=e(t),l=e(n),y=e(l);a(l);var v=o(l,4),f=e(v);f.__click=[Fa,z,A],a(v),a(n),a(t),k((c,_)=>m(y,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[u(A)]??""}, ${c??""} ${_??""}`),[()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[u(A)].getMonth()],()=>p[u(A)].getDate()]),la(3,t,()=>ua,()=>({duration:100})),b(r,t)};w(Ct,r=>{u(z)&&r(Wt)})}k((r,t,n)=>{m(Ut,`$${r??""}`),m(At,`$${t??""}`),m(Nt,`$${n??""}`)},[()=>u(C).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>u(W).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>u(O).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),b(M,ut),na()}ra(["click"]);export{Ga as component,za as universal};
