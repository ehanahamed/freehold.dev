import{P as N}from"../chunks/juNQPxT-.js";import"../chunks/CWj6FrbW.js";import{M as ct,as as wt,aF as pt,aG as bt,p as D,t as C,m as H,al as Q,a0 as yt,J as X,aj as i,j as s,K as S,ak as n,I as c,V as y}from"../chunks/IxQyQIcf.js";import{s as F}from"../chunks/CflRtShn.js";import{l as kt,f as Y,a as u,d as xt,c as T}from"../chunks/DVTOwQtX.js";import{i as nt}from"../chunks/BOmNJQeE.js";import{s as Z,c as $,B as zt,e as Lt,i as Ct}from"../chunks/nKthNF1v.js";import{s as k,r as st}from"../chunks/D8nEQqp6.js";import{b as lt}from"../chunks/t4jK5Smt.js";import{p as I}from"../chunks/CH_TBM0x.js";import{C as It}from"../chunks/BV-c7tZ-.js";import{b as Pt}from"../chunks/C6UUdrry.js";function vt(e,t,r){if(e.multiple){if(t==null)return;if(!wt(t))return pt();for(var a of e.options)a.selected=t.includes(j(a));return}for(a of e.options){var o=j(a);if(bt(o,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Ut(e,t){ct(()=>{var r=new MutationObserver(()=>{var a=e.__value;vt(e,a)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function At(e,t,r=t){var a=!0;kt(e,"change",o=>{var d=o?"[selected]":":checked",_;if(e.multiple)_=[].map.call(e.querySelectorAll(d),j);else{var P=e.querySelector(d)??e.querySelector("option:not([disabled])");_=P&&j(P)}r(_)}),ct(()=>{var o=t();if(vt(e,o,a),a&&o===void 0){var d=e.querySelector(":checked");d!==null&&(o=j(d),r(o))}e.__value=o,a=!1}),Ut(e)}function j(e){return"__value"in e?e.__value:e.value}async function Bt({fetch:e}){if(window.localStorage){let t=localStorage.getItem("auth");if(!t)return{authed:!1,PUBLIC_API_URL:N};try{return{authed:!0,employees:await(await e(N+"/employees",{method:"GET",headers:{Authorization:"Bearer "+t}})).json(),PUBLIC_API_URL:N}}catch(r){return console.error("Error while getting employees in settings' load func: ",r),{authed:!1,error:!0,PUBLIC_API_URL:N}}}}const ie=Object.freeze(Object.defineProperty({__proto__:null,load:Bt},Symbol.toStringTag,{value:"Module"}));var Et=Y('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="m410.3 231 11.3-11.3-33.9-33.9-62.1-62.1-33.9-33.9-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2l199.2-199.2 22.6-22.7zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9l-78.2 23 23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7l-14.4 14.5-22.6 22.6-11.4 11.3 33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5l-39.3-39.4c-25-25-65.5-25-90.5 0zm-47.4 168-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z" fill="currentcolor"></path></svg>');function St(e,t){D(t,!0);let r=I(t,"width",3,"1rem"),a=I(t,"height",3,"1rem");var o=Et();C(()=>{k(o,"width",r()),k(o,"height",a()),Z(o,0,$(t.class))}),u(e,o),H()}var jt=Y('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 512" fill="currentcolor"><path d="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm56-104A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"></path></svg>');function Tt(e,t){D(t,!0);let r=I(t,"width",3,"1rem"),a=I(t,"height",3,"1rem");var o=jt();C(()=>{k(o,"width",r()),k(o,"height",a()),Z(o,0,$(t.class))}),u(e,o),H()}var Mt=Y('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="m170.5 51.6-19 28.4h145l-19-28.4c-1.5-2.2-4-3.6-6.7-3.6h-93.7c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6 36.7 55H424c13.3 0 24 10.7 24 24s-10.7 24-24 24h-8v304c0 44.2-35.8 80-80 80H112c-44.2 0-80-35.8-80-80V128h-8c-13.3 0-24-10.7-24-24s10.7-24 24-24h69.8l36.7-55.1C140.9 9.4 158.4 0 177.1 0h93.7c18.7 0 36.2 9.4 46.6 24.9zM80 128v304c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32V128H80zm80 64v208c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0v208c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0v208c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16z" fill="currentcolor"></path></svg>');function dt(e,t){D(t,!0);let r=I(t,"width",3,"1rem"),a=I(t,"height",3,"1rem");var o=Mt();C(()=>{k(o,"width",r()),k(o,"height",a()),Z(o,0,$(t.class))}),u(e,o),H()}var Rt=async function(e,t,r){if(s(t).edit=!1,s(t).id==null)try{const a=await(await fetch(r.data.PUBLIC_API_URL+"/employees",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("auth"),"Content-Type":"application/json"},body:JSON.stringify({name:s(t).name,type:s(t).type.toUpperCase(),wage:parseFloat(s(t).wage)})})).json();a!=null&&a.id?s(t).id=a.id:(console.log(a),console.error("id not returned?"))}catch(a){console.error("Error adding employee: ",a),alert("Error while adding employee :( ")}else try{const a=await(await fetch(r.data.PUBLIC_API_URL+"/employees/"+s(t).id,{method:"PUT",headers:{Authorization:"Bearer "+localStorage.getItem("auth"),"Content-Type":"application/json"},body:JSON.stringify({name:s(t).name,type:s(t).type.toUpperCase(),wage:parseFloat(s(t).wage)})})).json()}catch(a){console.error("Error adding employee: ",a),alert("Error while adding employee :( ")}},Vt=T('<td><input type="text" placeholder="Name" style="min-width: 6rem; field-sizing: content;"/></td> <td><div class="select-wrapper" style="width: 8rem;"><select><option>floor</option><option>kitchen</option></select></div></td> <td><input type="text" placeholder="Name" style="min-width: 6rem; field-sizing: content;"/></td> <td><button><!> Save</button></td>',1),Ot=function(e,t){s(t).edit=!0},qt=T('<td> </td> <td> </td> <td> </td> <td><div class="flex" style="flex-wrap: nowrap;"><button class="alt"><!> Edit</button> <div class="dropdown"><button class="icon-only-button" aria-label="dropdown"><!></button> <div class="content"><button class="ohno"><!> Delete</button></div></div></div></td>',1),Nt=T("<tr><!></tr>"),Ft=function(e,t){s(t).push({name:"",type:"",wage:0,edit:!0})},Dt=async function(e,t,r,a,o){try{const d=await(await fetch(t.data.PUBLIC_API_URL+"/employees/"+s(r)[s(a)].id,{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("auth")}})).json();d!=null&&d.success?(s(r).splice(s(a),1),y(r,s(r),!0)):(console.log(d),alert("Error, couldn't delete ???"))}catch(d){console.error("Error while deleting employee: ",d),alert("Error deleting employee :( ")}finally{y(o,!1),y(a,-1)}},Ht=(e,t,r)=>{y(t,!1),y(r,-1)},Jt=T('<div class="modal"><div class="content"><p> </p> <div class="flex"><button class="ohno"><!> Remove</button> <button class="alt">Cancel</button></div></div></div>'),Gt=T('<div class="grid page"><div class="content"><div style="margin-top: 1rem; margin-bottom: 1rem;"><a class="button faint"><!> Back</a></div> Add/Edit Employees <table><thead><tr><th>Name</th><th>Type</th><th>Wage</th></tr></thead><tbody><!><tr><td><button>Add</button></td></tr></tbody></table></div></div> <!>',1);function ne(e,t){D(t,!0);let r=Q(yt(t.data.employees??[])),a=Q(!1),o=Q(-1);var d=Gt(),_=X(d),P=i(_),J=i(P),G=i(J),ut=i(G);zt(ut,{}),S(),n(G),n(J);var tt=c(J,2),et=c(i(tt)),at=i(et);Lt(at,17,()=>s(r),Ct,(U,l,M)=>{var h=Nt(),K=i(h);{var R=v=>{var f=Vt(),m=X(f),V=i(m);st(V),n(m);var g=c(m,2),O=i(g),w=i(O),A=i(w);A.value=A.__value="floor";var B=c(A);B.value=B.__value="kitchen",n(w),n(O),n(g);var z=c(g,2),p=i(z);st(p),n(z);var q=c(z,2),L=i(q);L.__click=[Rt,l,t];var E=i(L);It(E,{}),S(),n(L),n(q),lt(V,()=>s(l).name,b=>s(l).name=b),At(w,()=>s(l).type.toLowerCase(),b=>s(l).type=b.toUpperCase()),lt(p,()=>s(l).wage,b=>s(l).wage=b),u(v,f)},x=v=>{var f=qt(),m=X(f),V=i(m,!0);n(m);var g=c(m,2),O=i(g,!0);n(g);var w=c(g,2),A=i(w);n(w);var B=c(w,2),z=i(B),p=i(z);p.__click=[Ot,l];var q=i(p);St(q,{}),S(),n(p);var L=c(p,2),E=i(L),b=i(E);Tt(b,{}),n(E);var it=c(E,2),W=i(it);W.__click=()=>{y(a,!0),y(o,M,!0)};var mt=i(W);dt(mt,{}),S(),n(W),n(it),n(L),n(z),n(B),C(gt=>{F(V,s(l).name),F(O,gt),F(A,`$${s(l).wage??""}/hr`)},[()=>s(l).type.toLowerCase()]),u(v,f)};nt(K,v=>{s(l).edit?v(R):v(x,!1)})}n(h),u(U,h)});var rt=c(at),ot=i(rt),_t=i(ot);_t.__click=[Ft,r],n(ot),n(rt),n(et),n(tt),n(P),n(_);var ht=c(_,2);{var ft=U=>{var l=Jt(),M=i(l),h=i(M),K=i(h);n(h);var R=c(h,2),x=i(R);x.__click=[Dt,t,r,o,a];var v=i(x);dt(v,{}),S(),n(x);var f=c(x,2);f.__click=[Ht,a,o],n(R),n(M),n(l),C(()=>F(K,`Are you sure you want to remove "${s(r)[s(o)].name??""}"?`)),u(U,l)};nt(ht,U=>{s(a)&&U(ft)})}C(()=>k(G,"href",Pt)),u(e,d),H()}xt(["click"]);export{ne as component,ie as universal};
