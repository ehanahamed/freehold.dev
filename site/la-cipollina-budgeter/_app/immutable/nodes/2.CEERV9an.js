import{P as U}from"../chunks/juNQPxT-.js";import{f as ne,a as b,d as de,e as L}from"../chunks/DehP6Mmi.js";import{p as H,t as k,a as $,a7 as B,a9 as le,a0 as ce,aa as W,o as f,a6 as D,a2 as a,a4 as t,a3 as s,a5 as T}from"../chunks/abUTAAem.js";import{s as q}from"../chunks/Dgg-Cmmx.js";import{i as G}from"../chunks/C1hVJviJ.js";import{s as d,a as ue,c as ve,r as J}from"../chunks/DnMzuOnq.js";import{b as Y}from"../chunks/C-FQ8Ejh.js";import{b as me}from"../chunks/Dhxvh-rD.js";import{b as g}from"../chunks/Cq-YqXpB.js";import{d as fe}from"../chunks/zuijxeg2.js";import{d as ge}from"../chunks/BepKD6Lw.js";import{D as he}from"../chunks/BJcUHp8j.js";import{S as pe}from"../chunks/Dnzu9g1k.js";import{p as V}from"../chunks/DVTK6F6p.js";async function _e({fetch:u}){let r=localStorage.getItem("budgeter:auth");if(!r)return{authed:!1,PUBLIC_API_URL:U};try{const o=await(await u(U+"/authed-user",{method:"GET",headers:{Authorization:"Bearer "+r}})).json();return(o==null?void 0:o.id)!=null?{authed:!0,authedUser:o,PUBLIC_API_URL:U}:{authed:!1,PUBLIC_API_URL:U}}catch(o){return console.error("Error while getting users in settings' load func: ",o),{authed:!1,users:!0,PUBLIC_API_URL:U}}}const Oe=Object.freeze(Object.defineProperty({__proto__:null,load:_e},Symbol.toStringTag,{value:"Module"}));var ye=ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-98.5-79.8-178.3-178.3-178.3l-59.4 0z"></path></svg>');function be(u,r){H(r,!0);let o=V(r,"width",3,"1rem"),w=V(r,"height",3,"1rem");var l=ye();k(()=>{d(l,"width",o()),d(l,"height",w()),ue(l,0,ve(r.class))}),b(u,l),$()}var we=L('<a class="button">Record Day</a>'),xe=L('<a class="button">View/Edit Day</a>'),Pe=L('<div class="flex center underheadertext" style="flex-direction: column; margin-top: 4rem; gap: 0px;"><span style="margin-bottom: 0px;">Today is</span> <span class="h3" style="margin-top: 0px; margin-bottom: 0px;"> </span> <span> </span></div> <div class="flex center"><div class="flex center no-child-clickable-effect" style="flex-direction: column; min-width: 16rem;"><!> <a class="button alt">View/Edit Another Day</a> <div class="separator">or</div>   <a class="button"><!> Reports</a> <a class="button"><!> Employees</a> <a class="button"><!> Settings</a></div></div> <div style="width: 100%; margin-top: 4rem; margin-bottom: 8rem;"><p class="center fg0">Ehan Ahamed, Carson Fusco, Cristian Hernandez <br/> 2025 Â· <a href="https://github.com/ehanahamed/la-cipollina-budgeter" class="text fg0" style="text-decoration: underline;">Source Code</a></p></div>',1),Ie=function(u,r){u.key==="Enter"&&r()},Ue=L('<div style="margin-top: 2rem;"><div class="grid thin-centered"><div class="content"><div class="separator">Login</div> <div><input type="text" placeholder="Username"/></div> <div><input type="password" placeholder="Password"/></div> <div class="flex"><button>Continue</button></div></div></div></div>'),ke=L('<div class="img-container svelte-eafqbt"><img alt="La Cipollina" class="svelte-eafqbt"/></div> <p class="header-text svelte-eafqbt">Budgeter</p> <!>',1);function We(u,r){H(r,!0);let o=B(le(r.data.authed)),w=B(""),l=B("");async function j(){try{const e=await(await fetch(r.data.PUBLIC_API_URL+"/log-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f(w),password:f(l)})})).json();e!=null&&e.token?(localStorage.setItem("budgeter:auth",e.token),D(o,!0)):(console.log(e),alert("wrong password?"))}catch(e){console.error("Error in log-in req: ",e),alert("There was an error while logging in :( try again mabye")}}let E;const h=new Date,z=ge(h),K=fe(h);let F=B(!0);ce(()=>{f(o)&&(async()=>{try{const i=await(await fetch(`${r.data.PUBLIC_API_URL}/days/${z}`,{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("budgeter:auth")}})).json();(i==null?void 0:i.id)!=null&&D(F,!1)}catch(e){console.error(e)}})()});var N=ke(),R=W(N),Q=a(R);t(R);var X=s(R,4);{var Z=e=>{var i=Pe(),p=W(i),_=s(a(p),2),x=a(_,!0);t(_);var y=s(_,2),P=a(y);t(y),t(p);var v=s(p,2),I=a(v),S=a(I);{var n=c=>{var m=we();k(()=>d(m,"href",`${g??""}/record-day`)),b(c,m)},ae=c=>{var m=xe();k(()=>d(m,"href",`${g??""}/days/${z??""}`)),b(c,m)};G(S,c=>{f(F)?c(n):c(ae,!1)})}var O=s(S,2),C=s(O,4),te=a(C);he(te,{}),T(),t(C);var A=s(C,2),re=a(A);be(re,{}),T(),t(A);var M=s(A,2),oe=a(M);pe(oe,{}),T(),t(M),t(I),t(v),T(2),k((c,m,se,ie)=>{q(x,c),q(P,`${m??""} ${se??""}, ${ie??""}${localStorage.getItem("budgeter:showWeekNums")=="true"?`, W${K}`:""}`),d(O,"href",`${g??""}/select-day`),d(C,"href",`${g??""}/reports`),d(A,"href",`${g??""}/employees`),d(M,"href",`${g??""}/settings`)},[()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][h.getDay()],()=>["January","February","March","April","May","June","July","August","September","October","November","December"][h.getMonth()],()=>h.getDate(),()=>h.getFullYear()]),b(e,i)},ee=e=>{var i=Ue(),p=a(i),_=a(p),x=s(a(_),2),y=a(x);J(y),y.__keydown=function(n){n.key==="Enter"&&E.focus()},t(x);var P=s(x,2),v=a(P);J(v),v.__keydown=[Ie,j],me(v,n=>E=n,()=>E),t(P);var I=s(P,2),S=a(I);S.__click=j,t(I),t(_),t(p),t(i),Y(y,()=>f(w),n=>D(w,n)),Y(v,()=>f(l),n=>D(l,n)),b(e,i)};G(X,e=>{f(o)?e(Z):e(ee,!1)})}k(()=>d(Q,"src",`${g??""}/logo.png`)),b(u,N),$()}de(["keydown","click"]);export{We as component,Oe as universal};
