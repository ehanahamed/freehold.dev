import{P as f}from"../chunks/juNQPxT-.js";import{d as C,a as D,t as ot}from"../chunks/BiStlCBM.js";import{p as Et,a8 as b,a7 as J,o as s,aa as j,t as x,a as Tt,a2 as a,a5 as i,a3 as Nt,a4 as e,a9 as Rt}from"../chunks/CuyIZn2s.js";import{s as d}from"../chunks/D1ZQew5F.js";import{i as Wt}from"../chunks/DI4tddXV.js";import{e as nt,i as dt}from"../chunks/nELTDHYw.js";import{s as st}from"../chunks/uNlJViDn.js";import{b as w}from"../chunks/CfXCE_Md.js";import{B as Yt}from"../chunks/CxqwulL1.js";import{c as Jt}from"../chunks/CWPmrZZQ.js";import{d as O}from"../chunks/BepKD6Lw.js";import{d as jt}from"../chunks/zuijxeg2.js";async function Ot({fetch:F,params:m}){if(window.localStorage){let r=localStorage.getItem("budgeter:auth");if(!r)return{authed:!1,PUBLIC_API_URL:f,date:m.date};try{const _=await(await F(`${f}/weeks/${m.date}`,{method:"GET",headers:{Authorization:"Bearer "+r}})).json(),v=await(await F(`${f}/weeks/${m.date}/days`,{method:"GET",headers:{Authorization:"Bearer "+r}})).json();return{authed:!0,PUBLIC_API_URL:f,date:m.date,week:_,days:v}}catch(_){return console.error("Error while getting data: ",_),{authed:!1,error:!0,PUBLIC_API_URL:f,date:m.date}}}}const oe=Object.freeze(Object.defineProperty({__proto__:null,load:Ot},Symbol.toStringTag,{value:"Module"}));var Ct=C("<tr><td><b> </b></td><td> </td><td> </td><td> </td></tr> <tr><td>Increases</td><td> </td><td> </td><td> </td></tr> <tr><td>Expenses</td><td> </td><td> </td><td> </td></tr>",1),zt=C('<a class="button button-box"> <span class="fg0"> </span></a>'),Gt=C('<div class="grid page" style="margin-top: 4rem; margin-bottom: 10rem;"><div class="content"><div class="flex"><a class="button faint"><!> Back</a></div> <h3 style="margin-bottom: 0px;">Week Report</h3> <p style="margin-top: 0.4rem;"><!></p> <div style="margin-top: 2rem;"><div style="display: inline-block; margin-bottom: 2rem;"><div style="border: 0.2rem solid var(--border); border-radius: 0.8rem; min-width: 18rem;"><table style="border: none;"><thead><tr><th></th><th>Food Budget</th><th>Kitchen Budget</th><th>Floor Budget</th></tr></thead><tbody><!><tr><td><b>Week Final</b></td><td> </td><td> </td><td> </td></tr></tbody></table></div></div></div> <p>View/Edit Days:</p> <div class="flex" style="max-width: 16rem; flex-direction: column; flex-wrap: nowrap;"></div></div></div>');function ne(F,m){Et(m,!0);const r=(()=>{const[o,t,n]=m.data.week.startDate.split("-"),u=new Date(o,t-1,n);if(isNaN(u))window.location=`${w}/reports/${m.data.week.startDate}/err/invalid-date`;else return u})(),_=(()=>{const[o,t,n]=m.data.week.endDate.split("-");return new Date(o,t-1,n)})();O(r);const v={mon:r,tue:new Date(r.getFullYear(),r.getMonth(),r.getDate()+1),wed:new Date(r.getFullYear(),r.getMonth(),r.getDate()+2),thu:new Date(r.getFullYear(),r.getMonth(),r.getDate()+3),fri:new Date(r.getFullYear(),r.getMonth(),r.getDate()+4),sat:new Date(r.getFullYear(),r.getMonth(),r.getDate()+5),sun:_},mt=["sun","mon","tue","wed","thu","fri","sat"],z=["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()],ut=jt(r);let l=b({}),S=J(b(m.data.week.startFoodBudget)),p=J(b(m.data.week.startKitchenBudget)),$=J(b(m.data.week.startFloorBudget));m.data.days.forEach(o=>{const[t,n,u]=o.date.split("-"),c=new Date(t,n-1,u),g=Jt(s(S),s(p),s($),o,m.data.week.weeklyPay);l[mt[c.getDay()]]=g,j(S,g.foodBudgetFinal,!0),j(p,g.kitchenBudgetFinal,!0),j($,g.floorBudgetFinal,!0)}),console.log(l);var y=Gt(),G=a(y),k=a(G),B=a(k),lt=a(B);Yt(lt,{}),Nt(),e(B),e(k);var L=i(k,4),gt=a(L);{var ct=o=>{var t=ot();x((n,u)=>d(t,`Week ${ut??""} (${z??""} ${n??""}, ${u??""})`),[()=>r.getDate(),()=>r.getFullYear()]),D(o,t)},vt=o=>{var t=ot();x((n,u)=>d(t,`Week of ${z??""} ${n??""}, ${u??""}`),[()=>r.getDate(),()=>r.getFullYear()]),D(o,t)};Wt(gt,o=>{(localStorage==null?void 0:localStorage.getItem("budgeter:showWeekNums"))=="true"?o(ct):o(vt,!1)})}e(L);var U=i(L,2),V=a(U),q=a(V),H=a(q),Q=i(a(H)),X=a(Q);nt(X,17,()=>Object.keys(l),dt,(o,t)=>{var n=Ct(),u=Rt(n),c=a(u),g=a(c),A=a(g,!0);e(g),e(c);var h=i(c),P=a(h);e(h);var E=i(h),Dt=a(E);e(E);var et=i(E),xt=a(et);e(et),e(u);var T=i(u,2),N=i(a(T)),Ft=a(N);e(N);var R=i(N),bt=a(R);e(R);var at=i(R),wt=a(at);e(at),e(T);var rt=i(T,2),W=i(a(rt)),St=a(W);e(W);var Y=i(W),pt=a(Y);e(Y);var it=i(Y),$t=a(it);e(it),e(rt),x((yt,kt,Bt,Lt,Ut,Mt,It,At,Pt)=>{d(A,{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[s(t)]),d(P,`$${yt??""}`),d(Dt,`$${kt??""}`),d(xt,`$${Bt??""}`),d(Ft,`+$${Lt??""}`),d(bt,`+$${Ut??""}`),d(wt,`+$${Mt??""}`),d(St,`-$${It??""}`),d(pt,`-$${At??""}`),d($t,`-$${Pt??""}`)},[()=>l[s(t)].foodBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].kitchenBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].floorBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].foodBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].kitchenBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].floorBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].foodExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].kitchenExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>l[s(t)].floorExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),D(o,n)});var Z=i(X),M=i(a(Z)),_t=a(M);e(M);var I=i(M),ht=a(I);e(I);var K=i(I),ft=a(K);e(K),e(Z),e(Q),e(H),e(q),e(V),e(U);var tt=i(U,4);nt(tt,20,()=>["mon","tue","wed","thu","fri","sat","sun"],dt,(o,t)=>{var n=zt(),u=a(n),c=i(u),g=a(c);e(c),e(n),x((A,h,P)=>{st(n,"href",A),d(u,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),d(g,`${h??""} ${P??""}`)},[()=>l[t]?`${w}/days/${O(v[t])}`:`${w}/record-day?d=${O(v[t])}`,()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][v[t].getMonth()],()=>v[t].getDate()]),D(o,n)}),e(tt),e(G),e(y),x((o,t,n)=>{st(B,"href",`${w??""}/reports`),d(_t,`$${o??""}`),d(ht,`$${t??""}`),d(ft,`$${n??""}`)},[()=>s(S).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>s(p).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>s($).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),D(F,y),Tt()}export{ne as component,oe as universal};
