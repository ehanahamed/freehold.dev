import{P as N}from"../chunks/juNQPxT-.js";import{d as ra,e as $,a as y,t as P,g as ia}from"../chunks/DehP6Mmi.js";import{p as oa,a9 as E,a7 as L,o as u,a6 as x,aa as ot,t as S,a as na,a2 as e,a3 as o,a5 as nt,a4 as a}from"../chunks/abUTAAem.js";import{s as m}from"../chunks/Dgg-Cmmx.js";import{i as T}from"../chunks/C1hVJviJ.js";import{e as kt,i as Dt}from"../chunks/BddKktbU.js";import{s as St,r as sa,b as da}from"../chunks/DnMzuOnq.js";import{t as la,f as ua}from"../chunks/BRpqZUsj.js";import{b as ma}from"../chunks/Dhxvh-rD.js";import{b as M}from"../chunks/CPcaSW7i.js";import{B as ca}from"../chunks/V-Q0yVa9.js";import{C as wt}from"../chunks/DuO0dWcV.js";import{p as va,t as ga,C as ha,L as _a}from"../chunks/C7ppDnFM.js";import{c as fa}from"../chunks/CWPmrZZQ.js";import{d as J}from"../chunks/BepKD6Lw.js";import{d as pa}from"../chunks/zuijxeg2.js";async function ba({fetch:B,params:s,url:i}){if(window.localStorage){let k=localStorage.getItem("budgeter:auth");try{const U=await(await B(`${N}/weeks/${s.date}`,{method:"GET",headers:{Authorization:"Bearer "+k,"Eh-Share-Link-Token":i.searchParams.get("s")}})).json(),p=await(await B(`${N}/weeks/${s.date}/days`,{method:"GET",headers:{Authorization:"Bearer "+k,"Eh-Share-Link-Token":i.searchParams.get("s")}})).json();return{authed:!0,PUBLIC_API_URL:N,date:s.date,week:U,days:p,usingShareLink:k==null&&i.searchParams.has("s")}}catch(U){return console.error("Error while getting data: ",U),{authed:!1,error:!0,PUBLIC_API_URL:N,date:s.date,usingShareLink:k==null&&i.searchParams.has("s")}}}}const ja=Object.freeze(Object.defineProperty({__proto__:null,load:ba},Symbol.toStringTag,{value:"Module"}));var ya=$("<tr><td><b> </b></td><td> </td><td> </td><td> </td></tr> <tr><td>Increases</td><td> </td><td> </td><td> </td></tr> <tr><td>Expenses</td><td> </td><td> </td><td> </td></tr>",1),xa=$('<details><summary style="cursor: pointer;">Copy, Save, or Send this Report</summary> <div><p>You can copy &amp; paste the table</p> <button class="alt"><!> Copy</button> <p style="margin-top: 2rem;">Or you can send a link to this page;<br/> anyone with this special link can view this report<br/> without having to log in<br/></p> <div class="flex compact-gap"><input type="text" disabled/> <button class="alt"><!> Copy Link</button></div></div></details>'),ka=(B,s,i,k)=>{x(s,!0),x(i,k,!0)},Da=$('<button class="button button-box"> <span class="fg0"> </span></button>'),Sa=$('<a class="button button-box"> <span class="fg0"> </span></a>'),wa=(B,s,i)=>{x(s,!1),x(i,-1)},Fa=$('<div class="modal"><div class="content"><h4> </h4> <p>No data for this day</p> <div class="flex"><button>Okay</button></div></div></div>'),La=$('<div class="grid page" style="margin-top: 4rem; margin-bottom: 10rem;"><div class="content"><div class="flex"><a class="button faint"><!> Back</a></div> <h3 style="margin-bottom: 0px;">Week Report</h3> <p style="margin-top: 0.4rem;"><!></p> <div style="margin-top: 2rem;"><div style="display: inline-block; margin-bottom: 2rem;"><div style="border: 0.2rem solid var(--border); border-radius: 0.8rem; min-width: 18rem;"><table style="border: none;"><thead><tr><th></th><th>Food Budget</th><th>Kitchen Budget</th><th>Floor Budget</th></tr></thead><tbody><!><tr><td><b>Week Final</b></td><td> </td><td> </td><td> </td></tr></tbody></table></div> <!></div></div> <p><!></p> <div class="flex" style="max-width: 16rem; flex-direction: column; flex-wrap: nowrap;"></div></div></div> <!>',1);function za(B,s){oa(s,!0);const i=(()=>{const[r,t,d]=s.data.week.startDate.split("-"),l=new Date(r,t-1,d);if(isNaN(l))window.location=`${M}/reports/${s.data.week.startDate}/err/invalid-date`;else return l})(),k=(()=>{const[r,t,d]=s.data.week.endDate.split("-");return new Date(r,t-1,d)})(),U=J(i),p={mon:i,tue:new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),wed:new Date(i.getFullYear(),i.getMonth(),i.getDate()+2),thu:new Date(i.getFullYear(),i.getMonth(),i.getDate()+3),fri:new Date(i.getFullYear(),i.getMonth(),i.getDate()+4),sat:new Date(i.getFullYear(),i.getMonth(),i.getDate()+5),sun:k},Ft=["sun","mon","tue","wed","thu","fri","sat"],st=["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()],Lt=pa(i);let g=E({}),C=L(E(s.data.week.startFoodBudget)),W=L(E(s.data.week.startKitchenBudget)),O=L(E(s.data.week.startFloorBudget));s.data.days.forEach(r=>{const[t,d,l]=r.date.split("-"),b=new Date(t,d-1,l),v=fa(u(C),u(W),u(O),r,s.data.week.weeklyPay);g[Ft[b.getDay()]]=v,x(C,v.foodBudgetFinal,!0),x(W,v.kitchenBudgetFinal,!0),x(O,v.floorBudgetFinal,!0)});const dt=`${window.location.origin+M}/reports/${U}?s=${s.data.week.shareLinkToken}`;let I,R=L(!1),lt,j=L(!1),ut,z=L(!1),A=L(-1);var mt=La(),G=ot(mt),ct=e(G),H=e(ct),V=e(H),Tt=e(V);ca(Tt,{}),nt(),a(V),a(H);var q=o(H,4),Bt=e(q);{var Mt=r=>{var t=P();S((d,l)=>m(t,`Week ${Lt??""} (${st??""} ${d??""}, ${l??""})`),[()=>i.getDate(),()=>i.getFullYear()]),y(r,t)},$t=r=>{var t=P();S((d,l)=>m(t,`Week of ${st??""} ${d??""}, ${l??""}`),[()=>i.getDate(),()=>i.getFullYear()]),y(r,t)};T(Bt,r=>{(localStorage==null?void 0:localStorage.getItem("budgeter:showWeekNums"))=="true"?r(Mt):r($t,!1)})}a(q);var Q=o(q,2),vt=e(Q),X=e(vt),Z=e(X),gt=o(e(Z)),ht=e(gt);kt(ht,17,()=>Object.keys(g),Dt,(r,t)=>{var d=ya(),l=ot(d),b=e(l),v=e(b),f=e(v,!0);a(v),a(b);var c=o(b),h=e(c);a(c);var _=o(c),w=e(_);a(_);var D=o(_),F=e(D);a(D),a(l);var n=o(l,2),Y=o(e(n)),Ot=e(Y);a(Y);var et=o(Y),Rt=e(et);a(et);var bt=o(et),jt=e(bt);a(bt),a(n);var yt=o(n,2),rt=o(e(yt)),zt=e(rt);a(rt);var it=o(rt),Gt=e(it);a(it);var xt=o(it),Ht=e(xt);a(xt),a(yt),S((Vt,qt,Qt,Xt,Zt,Kt,ta,aa,ea)=>{m(f,{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[u(t)]),m(h,`$${Vt??""}`),m(w,`$${qt??""}`),m(F,`$${Qt??""}`),m(Ot,`+$${Xt??""}`),m(Rt,`+$${Zt??""}`),m(jt,`+$${Kt??""}`),m(zt,`-$${ta??""}`),m(Gt,`-$${aa??""}`),m(Ht,`-$${ea??""}`)},[()=>g[u(t)].foodBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].foodBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].foodExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),y(r,d)});var _t=o(ht),K=o(e(_t)),Ut=e(K);a(K);var tt=o(K),At=e(tt);a(tt);var ft=o(tt),Yt=e(ft);a(ft),a(_t),a(gt),a(Z),ma(Z,r=>I=r,()=>I),a(X);var It=o(X,2);{var Nt=r=>{var t=xa(),d=o(e(t),2),l=o(e(d),2);l.__click=async()=>{try{clearTimeout(lt);let n=I.cloneNode(!0);n.removeAttribute("style");const Y=va(ga(I),2);await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([n.outerHTML],{type:"text/html"}),"text/plain":new Blob([Y],{type:"text/plain"})})]),x(R,!0),lt=setTimeout(()=>x(R,!1),1e3)}catch(n){console.error(n),alert("idk why it didn't work ðŸ’€")}};var b=e(l);{var v=n=>{wt(n,{})},f=n=>{ha(n,{})};T(b,n=>{u(R)?n(v):n(f,!1)})}nt(),a(l);var c=o(l,4),h=e(c);sa(h);var _=o(h,2);_.__click=async()=>{try{clearTimeout(ut),await navigator.clipboard.writeText(dt),x(j,!0),ut=setTimeout(()=>x(j,!1),1e3)}catch(n){console.error(n),alert("idk why it didn't work ðŸ’€")}};var w=e(_);{var D=n=>{wt(n,{})},F=n=>{_a(n,{})};T(w,n=>{u(j)?n(D):n(F,!1)})}nt(),a(_),a(c),a(d),a(t),S(()=>da(h,dt)),y(r,t)};T(It,r=>{s.data.usingShareLink||r(Nt)})}a(vt),a(Q);var at=o(Q,2),Pt=e(at);{var Et=r=>{var t=P("Day Reports & Details:");y(r,t)},Jt=r=>{var t=P("View/Edit Days:");y(r,t)};T(Pt,r=>{s.data.usingShareLink?r(Et):r(Jt,!1)})}a(at);var pt=o(at,2);kt(pt,20,()=>["mon","tue","wed","thu","fri","sat","sun"],Dt,(r,t)=>{var d=ia(),l=ot(d);{var b=f=>{var c=Da();c.__click=[ka,z,A,t];var h=e(c),_=o(h),w=e(_);a(_),a(c),S((D,F)=>{m(h,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),m(w,`${D??""} ${F??""}`)},[()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[t].getMonth()],()=>p[t].getDate()]),y(f,c)},v=f=>{var c=Sa(),h=e(c),_=o(h),w=e(_);a(_),a(c),S((D,F,n)=>{St(c,"href",D),m(h,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),m(w,`${F??""} ${n??""}`)},[()=>s.data.usingShareLink?`${M}/days/${J(p[t])}?s=${s.data.week.shareLinkToken}`:g[t]?`${M}/days/${J(p[t])}`:`${M}/record-day?d=${J(p[t])}`,()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[t].getMonth()],()=>p[t].getDate()]),y(f,c)};T(l,f=>{s.data.usingShareLink&&g[t]==null?f(b):f(v,!1)})}y(r,d)}),a(pt),a(ct),a(G);var Ct=o(G,2);{var Wt=r=>{var t=Fa(),d=e(t),l=e(d),b=e(l);a(l);var v=o(l,4),f=e(v);f.__click=[wa,z,A],a(v),a(d),a(t),S((c,h)=>m(b,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[u(A)]??""}, ${c??""} ${h??""}`),[()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[u(A)].getMonth()],()=>p[u(A)].getDate()]),la(3,t,()=>ua,()=>({duration:100})),y(r,t)};T(Ct,r=>{u(z)&&r(Wt)})}S((r,t,d)=>{St(V,"href",`${M??""}/reports`),m(Ut,`$${r??""}`),m(At,`$${t??""}`),m(Yt,`$${d??""}`)},[()=>u(C).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>u(W).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>u(O).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),y(B,mt),na()}ra(["click"]);export{za as component,ja as universal};
