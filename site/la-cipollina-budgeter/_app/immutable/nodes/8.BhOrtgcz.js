import{P as I}from"../chunks/juNQPxT-.js";import{d as ia,e as $,a as y,t as P,g as oa}from"../chunks/DehP6Mmi.js";import{p as na,a9 as E,a7 as L,o as u,a6 as x,aa as ot,t as S,a as sa,a2 as e,a3 as o,a5 as nt,a4 as a}from"../chunks/abUTAAem.js";import{s as m}from"../chunks/Dgg-Cmmx.js";import{i as T}from"../chunks/C1hVJviJ.js";import{e as Dt,i as St}from"../chunks/BddKktbU.js";import{s as wt,r as da,b as la}from"../chunks/DnMzuOnq.js";import{t as ua,f as ma}from"../chunks/BRpqZUsj.js";import{b as ca}from"../chunks/Dhxvh-rD.js";import{b as M}from"../chunks/D4j64mfM.js";import{B as va}from"../chunks/V-Q0yVa9.js";import{C as Ft}from"../chunks/DuO0dWcV.js";import{p as ga,t as ha,C as _a,L as fa}from"../chunks/C7ppDnFM.js";import{c as pa}from"../chunks/CWPmrZZQ.js";import{d as J}from"../chunks/BepKD6Lw.js";import{d as ba}from"../chunks/zuijxeg2.js";async function ya({fetch:B,params:s,url:i}){if(window.localStorage){let k=localStorage.getItem("budgeter:auth");try{const U=await(await B(`${I}/weeks/${s.date}`,{method:"GET",headers:{Authorization:"Bearer "+k,"Eh-Share-Link-Token":i.searchParams.get("s")}})).json(),p=await(await B(`${I}/weeks/${s.date}/days`,{method:"GET",headers:{Authorization:"Bearer "+k,"Eh-Share-Link-Token":i.searchParams.get("s")}})).json();return{authed:!0,PUBLIC_API_URL:I,date:s.date,week:U,days:p,usingShareLink:k==null&&i.searchParams.has("s")}}catch(U){return console.error("Error while getting data: ",U),{authed:!1,error:!0,PUBLIC_API_URL:I,date:s.date,usingShareLink:k==null&&i.searchParams.has("s")}}}}const za=Object.freeze(Object.defineProperty({__proto__:null,load:ya},Symbol.toStringTag,{value:"Module"}));var xa=$("<tr><td><b> </b></td><td> </td><td> </td><td> </td></tr> <tr><td>Increases</td><td> </td><td> </td><td> </td></tr> <tr><td>Expenses</td><td> </td><td> </td><td> </td></tr>",1),ka=$('<details><summary style="cursor: pointer;">Copy, Save, or Send this Report</summary> <div><p>You can copy &amp; paste the table</p> <button class="alt"><!> Copy</button> <p style="margin-top: 2rem;">Or you can send a link to this page;<br/> anyone with this special link can view this report<br/> without having to log in<br/></p> <div class="flex compact-gap"><input type="text" disabled/> <button class="alt"><!> Copy Link</button></div></div></details>'),Da=(B,s,i,k)=>{x(s,!0),x(i,k,!0)},Sa=$('<button class="button button-box"> <span class="fg0"> </span></button>'),wa=$('<a class="button button-box"> <span class="fg0"> </span></a>'),Fa=(B,s,i)=>{x(s,!1),x(i,-1)},La=$('<div class="modal"><div class="content"><h4> </h4> <p>No data for this day</p> <div class="flex"><button>Okay</button></div></div></div>'),Ta=$('<div class="grid page" style="margin-top: 4rem; margin-bottom: 10rem;"><div class="content"><div class="flex"><a class="button faint"><!> Back</a></div> <h3 style="margin-bottom: 0px;">Week Report</h3> <p style="margin-top: 0.4rem;"><!></p> <div style="margin-top: 2rem;"><div style="display: inline-block; margin-bottom: 2rem;"><div style="border: 0.2rem solid var(--border); border-radius: 0.8rem; min-width: 18rem;"><table style="border: none;"><thead><tr><th></th><th>Food Budget</th><th>Kitchen Budget</th><th>Floor Budget</th></tr></thead><tbody><!><tr><td><b>Week Final</b></td><td> </td><td> </td><td> </td></tr></tbody></table></div> <!></div></div> <p><!></p> <div class="flex" style="max-width: 16rem; flex-direction: column; flex-wrap: nowrap;"></div></div></div> <!>',1);function Ga(B,s){na(s,!0);const i=(()=>{const[r,t,d]=s.data.week.startDate.split("-"),l=new Date(r,t-1,d);if(isNaN(l))window.location=`${M}/reports/${s.data.week.startDate}/err/invalid-date`;else return l})(),k=(()=>{const[r,t,d]=s.data.week.endDate.split("-");return new Date(r,t-1,d)})(),U=J(i),p={mon:i,tue:new Date(i.getFullYear(),i.getMonth(),i.getDate()+1),wed:new Date(i.getFullYear(),i.getMonth(),i.getDate()+2),thu:new Date(i.getFullYear(),i.getMonth(),i.getDate()+3),fri:new Date(i.getFullYear(),i.getMonth(),i.getDate()+4),sat:new Date(i.getFullYear(),i.getMonth(),i.getDate()+5),sun:k},Lt=["sun","mon","tue","wed","thu","fri","sat"],st=["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()],Tt=ba(i);let g=E({}),C=L(E(s.data.week.startFoodBudget)),W=L(E(s.data.week.startKitchenBudget)),O=L(E(s.data.week.startFloorBudget)),dt=1;s.data.days.forEach(r=>{const[t,d,l]=r.date.split("-"),b=new Date(t,d-1,l),v=pa(u(C),u(W),u(O),r,dt==1?s.data.week.weeklyPay:null);g[Lt[b.getDay()]]=v,x(C,v.foodBudgetFinal,!0),x(W,v.kitchenBudgetFinal,!0),x(O,v.floorBudgetFinal,!0),dt++});const lt=`${window.location.origin+M}/reports/${U}?s=${s.data.week.shareLinkToken}`;let Y,R=L(!1),ut,j=L(!1),mt,z=L(!1),A=L(-1);var ct=Ta(),G=ot(ct),vt=e(G),H=e(vt),V=e(H),Bt=e(V);va(Bt,{}),nt(),a(V),a(H);var q=o(H,4),Mt=e(q);{var $t=r=>{var t=P();S((d,l)=>m(t,`Week ${Tt??""} (${st??""} ${d??""}, ${l??""})`),[()=>i.getDate(),()=>i.getFullYear()]),y(r,t)},Ut=r=>{var t=P();S((d,l)=>m(t,`Week of ${st??""} ${d??""}, ${l??""}`),[()=>i.getDate(),()=>i.getFullYear()]),y(r,t)};T(Mt,r=>{(localStorage==null?void 0:localStorage.getItem("budgeter:showWeekNums"))=="true"?r($t):r(Ut,!1)})}a(q);var Q=o(q,2),gt=e(Q),X=e(gt),Z=e(X),ht=o(e(Z)),_t=e(ht);Dt(_t,17,()=>Object.keys(g),St,(r,t)=>{var d=xa(),l=ot(d),b=e(l),v=e(b),f=e(v,!0);a(v),a(b);var c=o(b),h=e(c);a(c);var _=o(c),w=e(_);a(_);var D=o(_),F=e(D);a(D),a(l);var n=o(l,2),N=o(e(n)),Rt=e(N);a(N);var et=o(N),jt=e(et);a(et);var yt=o(et),zt=e(yt);a(yt),a(n);var xt=o(n,2),rt=o(e(xt)),Gt=e(rt);a(rt);var it=o(rt),Ht=e(it);a(it);var kt=o(it),Vt=e(kt);a(kt),a(xt),S((qt,Qt,Xt,Zt,Kt,ta,aa,ea,ra)=>{m(f,{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[u(t)]),m(h,`$${qt??""}`),m(w,`$${Qt??""}`),m(F,`$${Xt??""}`),m(Rt,`+$${Zt??""}`),m(jt,`+$${Kt??""}`),m(zt,`+$${ta??""}`),m(Gt,`-$${aa??""}`),m(Ht,`-$${ea??""}`),m(Vt,`-$${ra??""}`)},[()=>g[u(t)].foodBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorBudgetStart.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].foodBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorBudgetIncrease.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].foodExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].kitchenExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>g[u(t)].floorExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),y(r,d)});var ft=o(_t),K=o(e(ft)),At=e(K);a(K);var tt=o(K),Nt=e(tt);a(tt);var pt=o(tt),Yt=e(pt);a(pt),a(ft),a(ht),a(Z),ca(Z,r=>Y=r,()=>Y),a(X);var It=o(X,2);{var Pt=r=>{var t=ka(),d=o(e(t),2),l=o(e(d),2);l.__click=async()=>{try{clearTimeout(ut);let n=Y.cloneNode(!0);n.removeAttribute("style");const N=ga(ha(Y),2);await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([n.outerHTML],{type:"text/html"}),"text/plain":new Blob([N],{type:"text/plain"})})]),x(R,!0),ut=setTimeout(()=>x(R,!1),1e3)}catch(n){console.error(n),alert("idk why it didn't work ðŸ’€")}};var b=e(l);{var v=n=>{Ft(n,{})},f=n=>{_a(n,{})};T(b,n=>{u(R)?n(v):n(f,!1)})}nt(),a(l);var c=o(l,4),h=e(c);da(h);var _=o(h,2);_.__click=async()=>{try{clearTimeout(mt),await navigator.clipboard.writeText(lt),x(j,!0),mt=setTimeout(()=>x(j,!1),1e3)}catch(n){console.error(n),alert("idk why it didn't work ðŸ’€")}};var w=e(_);{var D=n=>{Ft(n,{})},F=n=>{fa(n,{})};T(w,n=>{u(j)?n(D):n(F,!1)})}nt(),a(_),a(c),a(d),a(t),S(()=>la(h,lt)),y(r,t)};T(It,r=>{s.data.usingShareLink||r(Pt)})}a(gt),a(Q);var at=o(Q,2),Et=e(at);{var Jt=r=>{var t=P("Day Reports & Details:");y(r,t)},Ct=r=>{var t=P("View/Edit Days:");y(r,t)};T(Et,r=>{s.data.usingShareLink?r(Jt):r(Ct,!1)})}a(at);var bt=o(at,2);Dt(bt,20,()=>["mon","tue","wed","thu","fri","sat","sun"],St,(r,t)=>{var d=oa(),l=ot(d);{var b=f=>{var c=Sa();c.__click=[Da,z,A,t];var h=e(c),_=o(h),w=e(_);a(_),a(c),S((D,F)=>{m(h,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),m(w,`${D??""} ${F??""}`)},[()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[t].getMonth()],()=>p[t].getDate()]),y(f,c)},v=f=>{var c=wa(),h=e(c),_=o(h),w=e(_);a(_),a(c),S((D,F,n)=>{wt(c,"href",D),m(h,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[t]??""}, `),m(w,`${F??""} ${n??""}`)},[()=>s.data.usingShareLink?`${M}/days/${J(p[t])}?s=${s.data.week.shareLinkToken}`:g[t]?`${M}/days/${J(p[t])}`:`${M}/record-day?d=${J(p[t])}`,()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[t].getMonth()],()=>p[t].getDate()]),y(f,c)};T(l,f=>{s.data.usingShareLink&&g[t]==null?f(b):f(v,!1)})}y(r,d)}),a(bt),a(vt),a(G);var Wt=o(G,2);{var Ot=r=>{var t=La(),d=e(t),l=e(d),b=e(l);a(l);var v=o(l,4),f=e(v);f.__click=[Fa,z,A],a(v),a(d),a(t),S((c,h)=>m(b,`${{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"}[u(A)]??""}, ${c??""} ${h??""}`),[()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][p[u(A)].getMonth()],()=>p[u(A)].getDate()]),ua(3,t,()=>ma,()=>({duration:100})),y(r,t)};T(Wt,r=>{u(z)&&r(Ot)})}S((r,t,d)=>{wt(V,"href",`${M??""}/reports`),m(At,`$${r??""}`),m(Nt,`$${t??""}`),m(Yt,`$${d??""}`)},[()=>u(C).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>u(W).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),()=>u(O).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]),y(B,ct),sa()}ia(["click"]);export{Ga as component,za as universal};
